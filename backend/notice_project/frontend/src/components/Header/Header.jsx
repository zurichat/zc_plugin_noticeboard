import React, { useState } from "react";
import { createBrowserHistory } from "history";
import "./Header.css";
import axios from "axios";

const Header = () => {
	const [text, setText] = useState("");

	const handleChange = (e) => {
		setText(e.target.value);
		console.log(text);
	};

	const history = createBrowserHistory({ forceRefresh: true });
	const api = axios.create({
		baseURL: "https://noticeboard.zuri.chat/api/v1",
	});

	// const handleSubmit = async (e) => {
	// 	e.preventDefault();
	// 	let res = await api.get(`/search?q=${text}`);
	// 	console.log(res.data.data);
	// };

	const handleSubmit = async (e) => {
		e.preventDefault();
		try {
			const response = await api.get(`/search?q=${text}`);
			const searchData = response.data.data;
			console.log(response.data.data);
			console.log(searchData);
			setText("");
			history.push({
				pathname: "/search",
				state: { searchData },
			});
		} catch (error) {
			console.log(error);
		}
	};

	return (
		<header className="header">
			<div className="header__wraps">
				<div className="header__hamburger-icon">
					<svg width="20" height="20" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M2.24994 8.99994H15.7499" stroke="#00BB7C" strokeWidth="1.22693" strokeLinecap="round" strokeLinejoin="round" />
						<path d="M2.24994 4.5H15.7499" stroke="#00BB7C" strokeWidth="1.22693" strokeLinecap="round" strokeLinejoin="round" />
						<path d="M2.24994 13.5H15.7499" stroke="#00BB7C" strokeWidth="1.22693" strokeLinecap="round" strokeLinejoin="round" />
					</svg>
				</div>
				<form onSubmit={handleSubmit} className="header__form">
					<div className="header__search-icon">
						<svg viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path
								fillRule="evenodd"
								clipRule="evenodd"
								d="M7.875 13.5C10.9816 13.5 13.5 10.9816 13.5 7.875C13.5 4.7684 10.9816 2.25 7.875 2.25C4.7684 2.25 2.25 4.7684 2.25 7.875C2.25 10.9816 4.7684 13.5 7.875 13.5Z"
								stroke="#333333"
								strokeWidth="1.22693"
								strokeLinecap="round"
								strokeLinejoin="round"
							/>
							<path d="M15.7496 15.75L11.8496 11.85" stroke="#333333" strokeWidth="1.22693" strokeLinecap="round" strokeLinejoin="round" />
						</svg>
					</div>
					<input className="header__form-input" type="text" onChange={handleChange} value={text} placeholder="Search your workspace" />
				</form>
				<div className="header__settings">
					<svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path
							fillRule="evenodd"
							clipRule="evenodd"
							d="M9 1.87272C8.80109 1.87272 8.61032 1.9581 8.46967 2.11006C8.32902 2.26203 8.25 2.46814 8.25 2.68305V2.82404C8.24845 3.24282 8.1336 3.65197 7.91958 4.00113C7.70556 4.35029 7.40172 4.62422 7.04545 4.78919C6.98203 4.81856 6.91531 4.83826 6.84721 4.84788C6.52348 4.97036 6.17499 5.00056 5.83575 4.9341C5.445 4.85755 5.08444 4.65628 4.80055 4.35626L4.79464 4.35001L4.74967 4.30135C4.68002 4.22601 4.597 4.16592 4.50596 4.12514C4.41491 4.08437 4.31731 4.06338 4.21875 4.06338C4.12019 4.06338 4.02259 4.08437 3.93154 4.12514C3.8405 4.16592 3.75778 4.22569 3.68813 4.30103C3.61839 4.37629 3.56248 4.4663 3.52474 4.56467C3.487 4.66304 3.46757 4.76849 3.46757 4.87498C3.46757 4.98146 3.487 5.08691 3.52474 5.18528C3.56248 5.28365 3.6178 5.37302 3.68754 5.44828L3.73868 5.50354C4.01637 5.81026 4.20262 6.19986 4.27347 6.62204C4.34291 7.03581 4.29835 7.46231 4.14559 7.84868C4.00642 8.24295 3.76273 8.58437 3.44479 8.83007C3.12041 9.08074 2.73374 9.22017 2.33504 9.23025L2.3175 9.23047H2.25C2.05109 9.23047 1.86032 9.31584 1.71967 9.46781C1.57902 9.61977 1.5 9.82588 1.5 10.0408C1.5 10.2557 1.57902 10.4618 1.71967 10.6138C1.86032 10.7657 2.05109 10.8511 2.25 10.8511H2.38049C2.7681 10.8528 3.14679 10.9769 3.46996 11.2081C3.79201 11.4385 4.0449 11.7654 4.19776 12.1485C4.35681 12.54 4.40408 12.974 4.33347 13.3947C4.26262 13.8169 4.07634 14.2065 3.79865 14.5132L3.79286 14.5196L3.74783 14.5682C3.6781 14.6434 3.62248 14.7331 3.58474 14.8315C3.547 14.9299 3.52757 15.0353 3.52757 15.1418C3.52757 15.2483 3.547 15.3537 3.58474 15.4521C3.62248 15.5505 3.6778 15.6398 3.74754 15.7151C3.81719 15.7904 3.90049 15.8508 3.99154 15.8916C4.08259 15.9324 4.18019 15.9534 4.27875 15.9534C4.37731 15.9534 4.47491 15.9324 4.56596 15.8916C4.65701 15.8508 4.73972 15.7911 4.80937 15.7157L4.86052 15.6605C5.14441 15.3604 5.505 15.1592 5.89575 15.0827C6.27872 15.0076 6.67347 15.0558 7.03108 15.2208C7.39599 15.3712 7.712 15.6345 7.93941 15.978C8.17142 16.3285 8.30047 16.7462 8.30979 17.177L8.31 17.196V17.2689C8.31 17.4838 8.38902 17.6899 8.52967 17.8419C8.67032 17.9938 8.86109 18.0792 9.06 18.0792C9.25891 18.0792 9.44968 17.9938 9.59033 17.8419C9.73098 17.6899 9.81 17.4838 9.81 17.2689V17.1311L9.81001 17.1279C9.81155 16.7091 9.9264 16.3 10.1404 15.9508C10.3537 15.6028 10.6562 15.3296 11.0109 15.1644C11.3733 14.9926 11.7748 14.9416 12.1642 15.0178C12.555 15.0944 12.9156 15.2956 13.1994 15.5957L13.2054 15.6019L13.2503 15.6506C13.32 15.7259 13.403 15.786 13.494 15.8268C13.5851 15.8676 13.6827 15.8886 13.7812 15.8886C13.8798 15.8886 13.9774 15.8676 14.0685 15.8268C14.1595 15.786 14.2422 15.7262 14.3119 15.6509C14.3816 15.5756 14.4375 15.4856 14.4753 15.3873C14.513 15.2889 14.5324 15.1834 14.5324 15.077C14.5324 14.9705 14.513 14.865 14.4753 14.7667C14.4375 14.6683 14.3822 14.5789 14.3125 14.5037L14.2613 14.4484C13.9836 14.1417 13.7974 13.7521 13.7265 13.3299C13.6559 12.9092 13.7032 12.4753 13.8622 12.0838C14.0151 11.7006 14.268 11.3737 14.59 11.1433C14.9132 10.9121 15.2919 10.788 15.6795 10.7863L15.6825 10.7863L15.75 10.7863C15.9489 10.7863 16.1397 10.7009 16.2803 10.549C16.421 10.397 16.5 10.1909 16.5 9.97597C16.5 9.76106 16.421 9.55495 16.2803 9.40298C16.1397 9.25102 15.9489 9.16564 15.75 9.16564H15.6225L15.6195 9.16564C15.2319 9.16397 14.8532 9.03988 14.53 8.80864C14.2069 8.57741 13.9533 8.24913 13.8006 7.86421C13.7735 7.79569 13.7552 7.7236 13.7463 7.65002C13.633 7.30026 13.605 6.92374 13.6665 6.55721C13.7374 6.13503 13.9237 5.74547 14.2014 5.43875L14.2071 5.43236L14.2522 5.38377C14.3219 5.30852 14.3775 5.21883 14.4153 5.12046C14.453 5.02208 14.4724 4.91664 14.4724 4.81015C14.4724 4.70366 14.453 4.59822 14.4153 4.49984C14.3775 4.40147 14.3222 4.3121 14.2525 4.23685C14.1828 4.1615 14.0995 4.1011 14.0085 4.06032C13.9174 4.01954 13.8198 3.99855 13.7213 3.99855C13.6227 3.99855 13.5251 4.01954 13.434 4.06032C13.343 4.1011 13.2603 4.16087 13.1906 4.23621L13.1395 4.29147C12.8556 4.59149 12.495 4.79272 12.1042 4.86927C11.7148 4.94556 11.3132 4.89449 10.9508 4.72264C10.5962 4.55749 10.2937 4.28426 10.0804 3.93631C9.8664 3.58715 9.75155 3.17799 9.75001 2.75921L9.75 2.75598V2.68305C9.75 2.46814 9.67098 2.26203 9.53033 2.11006C9.38968 1.9581 9.19891 1.87272 9 1.87272ZM7.40901 0.964091C7.83097 0.508195 8.40326 0.252075 9 0.252075C9.59674 0.252075 10.169 0.508195 10.591 0.964091C11.0129 1.41999 11.25 2.03831 11.25 2.68305V2.75395C11.2506 2.85625 11.2787 2.95616 11.331 3.04147C11.3835 3.12711 11.4581 3.1943 11.5454 3.23477L11.5528 3.23819C11.642 3.28068 11.7408 3.2934 11.8366 3.27462C11.9314 3.25605 12.019 3.20756 12.0883 3.1353L12.1294 3.09087C12.3383 2.86485 12.5865 2.68554 12.8596 2.56321C13.1328 2.44087 13.4256 2.3779 13.7213 2.3779C14.0169 2.3779 14.3097 2.44087 14.5829 2.56321C14.856 2.68554 15.1042 2.86485 15.3131 3.09087C15.522 3.31651 15.6878 3.58439 15.8009 3.87923C15.9141 4.17435 15.9724 4.49068 15.9724 4.81015C15.9724 5.12962 15.9141 5.44595 15.8009 5.74107C15.6877 6.03604 15.5219 6.30404 15.3128 6.52974L15.2714 6.57448C15.2045 6.64932 15.1597 6.74392 15.1425 6.84635C15.1251 6.9499 15.1368 7.05671 15.1761 7.15299C15.1973 7.20488 15.2134 7.25889 15.2241 7.31411C15.2596 7.3706 15.3051 7.41938 15.3583 7.45744C15.4372 7.51393 15.5297 7.54435 15.6244 7.54499H15.75C16.3467 7.54499 16.919 7.80111 17.341 8.25701C17.7629 8.7129 18 9.33123 18 9.97597C18 10.6207 17.7629 11.239 17.341 11.6949C16.919 12.1508 16.3467 12.4069 15.75 12.4069H15.6844C15.5897 12.4076 15.4972 12.438 15.4183 12.4945C15.339 12.5512 15.2768 12.6317 15.2394 12.7262L15.2362 12.7341C15.1969 12.8304 15.1851 12.9372 15.2025 13.0408C15.2197 13.1432 15.2645 13.2378 15.3314 13.3126L15.3725 13.357C15.5816 13.5828 15.7477 13.8511 15.8609 14.146C15.9741 14.4412 16.0324 14.7575 16.0324 15.077C16.0324 15.3964 15.9741 15.7128 15.8609 16.0079C15.7477 16.303 15.5817 16.5711 15.3725 16.7969C15.1636 17.0229 14.916 17.2016 14.6429 17.3239C14.3697 17.4462 14.0769 17.5092 13.7812 17.5092C13.4856 17.5092 13.1928 17.4462 12.9196 17.3239C12.6466 17.2016 12.3986 17.0224 12.1897 16.7966L12.1482 16.7518C12.079 16.6795 11.9914 16.6311 11.8966 16.6125C11.8008 16.5937 11.7019 16.6064 11.6128 16.6489L11.6055 16.6524C11.5181 16.6929 11.4435 16.76 11.391 16.8456C11.3387 16.931 11.3106 17.0309 11.31 17.1332V17.2689C11.31 17.9136 11.0729 18.5319 10.651 18.9878C10.229 19.4437 9.65674 19.6999 9.06 19.6999C8.46326 19.6999 7.89097 19.4437 7.46901 18.9878C7.04705 18.5319 6.81 17.9136 6.81 17.2689V17.2076C6.80644 17.1045 6.77495 17.0048 6.71936 16.9208C6.66245 16.8348 6.58292 16.7694 6.49111 16.7329C6.47628 16.727 6.46163 16.7206 6.44718 16.7137C6.35806 16.6712 6.25921 16.6585 6.16337 16.6773C6.06856 16.6959 5.981 16.7444 5.91172 16.8167L5.87063 16.8611C5.66172 17.0869 5.41338 17.2664 5.14037 17.3887C4.86722 17.5111 4.57444 17.574 4.27875 17.574C3.98306 17.574 3.69028 17.5111 3.41713 17.3887C3.14425 17.2665 2.89631 17.0874 2.68746 16.8617C2.47827 16.6359 2.31231 16.3678 2.19908 16.0727C2.08585 15.7776 2.02757 15.4613 2.02757 15.1418C2.02757 14.8223 2.08585 14.506 2.19908 14.2109C2.31231 13.9158 2.47827 13.6476 2.68746 13.4219L2.72858 13.3774C2.79546 13.3026 2.84035 13.208 2.85754 13.1056C2.87491 13.002 2.86318 12.8952 2.82385 12.7989L2.82061 12.791C2.78315 12.6966 2.721 12.616 2.64174 12.5593C2.56278 12.5028 2.47031 12.4724 2.37562 12.4718H2.25C1.65326 12.4718 1.08097 12.2156 0.65901 11.7597C0.237053 11.3039 0 10.6855 0 10.0408C0 9.39606 0.237053 8.77773 0.65901 8.32184C1.08097 7.86594 1.65326 7.60982 2.25 7.60982H2.30673C2.40213 7.60598 2.49444 7.57195 2.57216 7.51188C2.65173 7.4504 2.71233 7.36448 2.7461 7.26529C2.75155 7.24926 2.75747 7.23343 2.76385 7.21781C2.80318 7.12153 2.81491 7.01473 2.79754 6.91118C2.78035 6.80875 2.73546 6.71415 2.66857 6.6393L2.62747 6.59489C2.41827 6.36912 2.25231 6.10101 2.13908 5.80589C2.02585 5.51078 1.96757 5.19444 1.96757 4.87498C1.96757 4.55551 2.02585 4.23917 2.13908 3.94406C2.25226 3.64908 2.41811 3.38109 2.62717 3.15538C2.83607 2.92951 3.08412 2.75031 3.35713 2.62803C3.63028 2.5057 3.92307 2.44273 4.21875 2.44273C4.51443 2.44273 4.80722 2.5057 5.08037 2.62803C5.35351 2.75037 5.60166 2.92968 5.81063 3.1557L5.85173 3.20011C5.92101 3.27238 6.00857 3.32088 6.10337 3.33945C6.19921 3.35823 6.29806 3.34555 6.38718 3.30306C6.43521 3.28016 6.48519 3.26283 6.5363 3.25127C6.58859 3.21292 6.63374 3.16376 6.66896 3.10629C6.72125 3.02099 6.74941 2.92108 6.75 2.81878V2.68305C6.75 2.03831 6.98705 1.41999 7.40901 0.964091ZM9 8.35532C8.17157 8.35532 7.5 9.08091 7.5 9.97597C7.5 10.871 8.17157 11.5966 9 11.5966C9.82843 11.5966 10.5 10.871 10.5 9.97597C10.5 9.08091 9.82843 8.35532 9 8.35532ZM6 9.97597C6 8.18585 7.34315 6.73467 9 6.73467C10.6569 6.73467 12 8.18585 12 9.97597C12 11.7661 10.6569 13.2173 9 13.2173C7.34315 13.2173 6 11.7661 6 9.97597Z"
							fill="#999999"
						/>
					</svg>
				</div>
				<div className="header__profile">
					<img className="header__profile__image" src={require("./images/profile_icon_img_x2.png").default} alt="Profile" />
				</div>
			</div>
		</header>
	);
};

export default Header;
